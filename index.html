<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SIAPIS - Sistem Informasi Sekolah</title>

<style>
body{margin:0;font-family:Arial;background:#eef2ff}
.app{display:flex;height:100vh}
.sidebar{width:270px;background:#1e3a8a;color:white;overflow:auto;padding:15px}
.sidebar h2{margin-top:0}
.menu{cursor:pointer;padding:10px;border-radius:8px;margin-top:4px}
.menu:hover{background:#2563eb}
.submenu{display:none;padding-left:15px}
.submenu a{display:block;padding:8px;color:white;text-decoration:none;border-radius:6px}
.submenu a:hover{background:#3b82f6}
.content{flex:1;padding:20px;overflow:auto}
.page{display:none;background:white;padding:20px;border-radius:15px}
.active{display:block}
.login{position:fixed;top:0;left:0;width:100%;height:100%;background:#1e3a8a;color:white;display:flex;align-items:center;justify-content:center;flex-direction:column}
button{padding:8px;border:none;border-radius:6px;background:#2563eb;color:white;cursor:pointer}
</style>
</head>

<body>

<div id="login" class="login">
<h2>LOGIN SIAPIS</h2>
<select id="role">
<option>Admin</option>
<option>Guru</option>
<option>Operator</option>
</select>
<button onclick="login()">Masuk</button>
</div>

<div id="app" class="app" style="display:none">

<div class="sidebar">
<h2>SIAPIS</h2>

<div class="menu" onclick="showPage('dashboard')">ğŸ  Dasbor</div>

<div class="menu" onclick="toggleMenu('profil')">ğŸ“š Profil Sekolah</div>
<div id="profil" class="submenu">
<a onclick="showPage('latar')">Latar Belakang</a>
<a onclick="showPage('visi')">Visi</a>
<a onclick="showPage('misi')">Misi</a>
<a onclick="showPage('tujuan')">Tujuan</a>
</div>

<div class="menu" onclick="toggleMenu('siswa')">ğŸ‘¨â€ğŸ“ Data Siswa</div>
<div id="siswa" class="submenu">
<a onclick="showPage('sd1')">SD Kelas 1</a>
<a onclick="showPage('smp7')">SMP VII</a>
<a onclick="showPage('sma10')">SMA X</a>
</div>

<div class="menu" onclick="toggleMenu('arsip')">ğŸ“ Arsip Dokumen</div>
<div id="arsip" class="submenu">
<a onclick="showPage('suratmasuk')">Surat Masuk</a>
<a onclick="showPage('suratkeluar')">Surat Keluar</a>
<a onclick="showPage('suratberharga')">Surat Berharga</a>
</div>

<div class="menu" onclick="toggleMenu('sarpras')">ğŸ« Sarana & Prasarana</div>
<div id="sarpras" class="submenu">
<a onclick="showPage('bergerak')">Barang Bergerak</a>
<a onclick="showPage('tidakbergerak')">Barang Tidak Bergerak</a>
</div>

<div class="menu" onclick="toggleMenu('dataadmin')">ğŸ‘¨â€ğŸ’¼ Data Admin</div>
<div id="dataadmin" class="submenu">
<a onclick="showPage('struktur')">Struktur Organisasi</a>
<a onclick="showPage('updateadmin')">Perbaharui Data</a>
</div>

<div class="menu" onclick="toggleMenu('ppdb')">ğŸ“ PPDB</div>
<div id="ppdb" class="submenu">
<a onclick="showPage('ppdbdaftar')">Pendaftaran</a>
<a onclick="showPage('ppdbseleksi')">Seleksi</a>
<a onclick="showPage('ppdbhasil')">Hasil</a>
<a onclick="showPage('ppdbloket')">Laporan</a>
</div>

<div id="menuAdmin" class="menu" onclick="showPage('admin')">âš™ï¸ Admin</div>

</div>

<div class="content">

<div id="dashboard" class="page active"><h2>Dashboard Sekolah</h2></div>
<div id="latar" class="page"><h2>Latar Belakang</h2></div>
<div id="visi" class="page"><h2>Visi</h2></div>
<div id="misi" class="page"><h2>Misi</h2></div>
<div id="tujuan" class="page"><h2>Tujuan Sekolah</h2></div>

<div id="sd1" class="page"><h2>Data Siswa SD 1</h2></div>
<div id="smp7" class="page"><h2>Data Siswa SMP VII</h2></div>
<div id="sma10" class="page"><h2>Data Siswa SMA X</h2></div>

<div id="suratmasuk" class="page">
<h2>Surat Masuk</h2>
<input type="file" onchange="uploadFile(this)">
<button onclick="downloadFile()">Download</button>
</div>

<div id="suratkeluar" class="page">
<h2>Surat Keluar</h2>
<input type="file" onchange="uploadFile(this)">
</div>

<div id="suratberharga" class="page">
<h2>Surat Berharga</h2>
<input type="file" onchange="uploadFile(this)">
</div>

<div id="bergerak" class="page">
<h2>Barang Bergerak</h2>
<input type="file" onchange="uploadFile(this)">
</div>

<div id="tidakbergerak" class="page">
<h2>Barang Tidak Bergerak</h2>
<input type="file" onchange="uploadFile(this)">
</div>

<div id="struktur" class="page">
<h2>Struktur Organisasi</h2>
<textarea style="width:100%;height:100px"></textarea>
<button>Simpan</button>
</div>

<div id="updateadmin" class="page">
<h2>Perbaharui Data Admin</h2>
<input type="text" placeholder="Nama Admin">
<button>Simpan</button>
</div>

<div id="ppdbdaftar" class="page"><h2>Pendaftaran PPDB</h2><input type="file" onchange="uploadFile(this)"></div>
<div id="ppdbseleksi" class="page"><h2>Seleksi PPDB</h2></div>
<div id="ppdbhasil" class="page"><h2>Hasil PPDB</h2></div>
<div id="ppdbloket" class="page"><h2>Laporan PPDB</h2></div>

<div id="admin" class="page"><h2>Panel Admin</h2></div>

</div>
</div>

<script>

const API_SIAPIS="https://script.google.com/macros/s/AKfycbzXHyINioohUUUXHPPvLriAcWbs_E9DhXcPKsoB9bdxkrH5tJ6gYNgF_4AQcxFBr7Pv/exec";

fetch(API_SIAPIS)
.then(res=>res.text())
.then(data=>console.log("DATABASE SIAPIS AKTIF"))
.catch(err=>console.log("DATABASE ERROR:",err));

let role="";

function toggleMenu(id){
let el=document.getElementById(id);
el.style.display=el.style.display==="block"?"none":"block";
}

function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function login(){
role=document.getElementById("role").value;
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="flex";
if(role!=="Admin"){
document.getElementById("menuAdmin").style.display="none";
}
}

function uploadFile(input){

const file=input.files[0];
if(!file)return alert("Pilih file dulu");

let formData=new FormData();
formData.append("file",file);
formData.append("menu","SIAPIS");

fetch(API_SIAPIS,{
method:"POST",
body:formData
})
.then(res=>res.text())
.then(data=>{
alert("âœ… Upload berhasil masuk Google Drive SIAPIS");
})
.catch(err=>{
alert("âŒ Upload gagal");
console.log(err);
});

}

function downloadFile(){
window.open("LINK_GOOGLE_DRIVE_FILE_KAMU");
}

</script>

</body>
</html>
