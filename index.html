<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SIAPIS - Sistem Informasi Administrasi Sekolah</title>

<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

<style>
body{margin:0;font-family:Arial;background:#eef2ff}
.app{display:flex;height:100vh}
.sidebar{width:270px;background:#1e3a8a;color:white;padding:15px;overflow:auto}
.sidebar h2{margin-top:0}
.menu{cursor:pointer;padding:10px;border-radius:8px;margin-top:5px}
.menu:hover{background:#2563eb}
.submenu{display:none;padding-left:15px}
.submenu div{padding:8px;border-radius:6px;cursor:pointer}
.submenu div:hover{background:#3b82f6}
.content{flex:1;padding:20px;overflow:auto}
.page{display:none;background:white;padding:20px;border-radius:15px}
.active{display:block}
.login{position:fixed;top:0;left:0;width:100%;height:100%;background:#1e3a8a;color:white;display:flex;align-items:center;justify-content:center;flex-direction:column}
button{padding:8px;border:none;border-radius:6px;background:#2563eb;color:white;cursor:pointer;margin-top:5px}
input,select{padding:6px;border-radius:6px;border:1px solid #ccc;margin-top:5px}
.card{background:#f9fafb;padding:15px;border-radius:10px;margin-top:10px}
table{border-collapse:collapse;width:100%;margin-top:10px}
table,th,td{border:1px solid #ccc}
th,td{padding:8px;text-align:left}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login" class="login">
<h2>LOGIN SIAPIS RESMI</h2>
<select id="role">
<option>Admin</option>
<option>Guru</option>
<option>Operator</option>
</select>
<button onclick="login()">Masuk</button>
</div>

<!-- APP -->
<div id="app" class="app" style="display:none">

<div class="sidebar">
<h2>SIAPIS</h2>

<div class="menu" onclick="showPage('dashboard')">ğŸ  Dashboard</div>

<div class="menu" onclick="toggleMenu('sekolahMenu')">ğŸ« Data Sekolah â–¼</div>
<div id="sekolahMenu" class="submenu">
<div onclick="showPage('profilSekolah')">Profil Sekolah</div>
<div onclick="showPage('visiMisi')">Visi & Misi</div>
</div>

<div class="menu" onclick="toggleMenu('siswaMenu')">ğŸ‘¨â€ğŸ“ Data Siswa â–¼</div>
<div id="siswaMenu" class="submenu">
<div onclick="showPage('inputSiswa')">Input Siswa</div>
<div onclick="showPage('listSiswa')">Daftar Siswa</div>
</div>

<div class="menu" onclick="toggleMenu('guruMenu')">ğŸ‘©â€ğŸ« Data Guru â–¼</div>
<div id="guruMenu" class="submenu">
<div onclick="showPage('inputGuru')">Input Guru</div>
<div onclick="showPage('listGuru')">Daftar Guru</div>
</div>

<div class="menu" onclick="toggleMenu('dokumenMenu')">ğŸ“ Dokumen â–¼</div>
<div id="dokumenMenu" class="submenu">
<div onclick="showPage('uploadPage')">Upload Berkas</div>
<div onclick="showPage('dataPage')">Data Berkas</div>
</div>

<div class="menu" onclick="logout()">ğŸšª Logout</div>

</div>

<div class="content">

<!-- DASHBOARD -->
<div id="dashboard" class="page active">
<h2>Dashboard SIAPIS</h2>
<div class="card">Jumlah Siswa: <span id="totalSiswa">0</span></div>
<div class="card">Jumlah Guru: <span id="totalGuru">0</span></div>
</div>

<!-- PROFIL SEKOLAH -->
<div id="profilSekolah" class="page">
<h2>Profil Sekolah</h2>
<textarea style="width:100%;height:100px" placeholder="Isi profil sekolah..."></textarea>
<button>Simpan</button>
</div>

<!-- VISI MISI -->
<div id="visiMisi" class="page">
<h2>Visi & Misi</h2>
<textarea style="width:100%;height:100px" placeholder="Isi visi dan misi..."></textarea>
<button>Simpan</button>
</div>

<!-- INPUT SISWA -->
<div id="inputSiswa" class="page">
<h2>Input Data Siswa</h2>
<input id="namaSiswa" placeholder="Nama Siswa">
<button onclick="tambahSiswa()">Simpan</button>
</div>

<!-- LIST SISWA -->
<div id="listSiswa" class="page">
<h2>Daftar Siswa</h2>
<table>
<thead><tr><th>Nama</th></tr></thead>
<tbody id="tabelSiswa"></tbody>
</table>
</div>

<!-- INPUT GURU -->
<div id="inputGuru" class="page">
<h2>Input Data Guru</h2>
<input id="namaGuru" placeholder="Nama Guru">
<button onclick="tambahGuru()">Simpan</button>
</div>

<!-- LIST GURU -->
<div id="listGuru" class="page">
<h2>Daftar Guru</h2>
<table>
<thead><tr><th>Nama</th></tr></thead>
<tbody id="tabelGuru"></tbody>
</table>
</div>

<!-- UPLOAD -->
<div id="uploadPage" class="page">
<h2>Upload Dokumen (PDF / Excel)</h2>
<input type="file" accept=".pdf,.xlsx,.xls" onchange="uploadFile(this)">
<div id="preview"></div>
</div>

<!-- DATA BERKAS -->
<div id="dataPage" class="page">
<h2>Data Berkas Terakhir</h2>
<div id="fileInfo">Belum ada file</div>
<button onclick="downloadLast()">Download Terakhir</button>
</div>

</div>
</div>

<script>

let siswa=[];
let guru=[];
let lastFile=null;

function login(){
document.getElementById("login").style.display="none";
document.getElementById("app").style.display="flex";
}

function logout(){
location.reload();
}

function toggleMenu(id){
let menu=document.getElementById(id);
menu.style.display = menu.style.display==="block" ? "none":"block";
}

function showPage(id){
document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function tambahSiswa(){
let nama=document.getElementById("namaSiswa").value;
if(!nama) return alert("Isi nama dulu");
siswa.push(nama);
renderSiswa();
}

function renderSiswa(){
let tbody=document.getElementById("tabelSiswa");
tbody.innerHTML="";
siswa.forEach(n=>{
tbody.innerHTML+="<tr><td>"+n+"</td></tr>";
});
document.getElementById("totalSiswa").innerText=siswa.length;
}

function tambahGuru(){
let nama=document.getElementById("namaGuru").value;
if(!nama) return alert("Isi nama dulu");
guru.push(nama);
renderGuru();
}

function renderGuru(){
let tbody=document.getElementById("tabelGuru");
tbody.innerHTML="";
guru.forEach(n=>{
tbody.innerHTML+="<tr><td>"+n+"</td></tr>";
});
document.getElementById("totalGuru").innerText=guru.length;
}

function uploadFile(input){
const file=input.files[0];
if(!file) return alert("Pilih file dulu");
lastFile=file;
document.getElementById("fileInfo").innerHTML=file.name;

if(file.name.endsWith(".xlsx")||file.name.endsWith(".xls")){
const reader=new FileReader();
reader.onload=function(e){
const data=new Uint8Array(e.target.result);
const workbook=XLSX.read(data,{type:"array"});
const sheet=workbook.Sheets[workbook.SheetNames[0]];
const json=XLSX.utils.sheet_to_json(sheet);
document.getElementById("preview").innerHTML="<pre>"+JSON.stringify(json,null,2)+"</pre>";
};
reader.readAsArrayBuffer(file);
}
}

function downloadLast(){
if(!lastFile) return alert("Belum ada file");
const url=URL.createObjectURL(lastFile);
const a=document.createElement("a");
a.href=url;
a.download=lastFile.name;
a.click();
}

</script>

</body>
</html>
